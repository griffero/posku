<div class="mb-8">
  <h1 class="text-2xl font-bold text-gray-900">Dashboard</h1>
</div>

<!-- Stats -->
<div class="grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8">
  <div class="bg-white overflow-hidden shadow rounded-lg">
    <div class="p-5">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
          </svg>
        </div>
        <div class="ml-5 w-0 flex-1">
          <dl>
            <dt class="text-sm font-medium text-gray-500 truncate">Viajes Próximos</dt>
            <dd class="text-lg font-medium text-gray-900"><%= @stats[:upcoming_trips] %></dd>
          </dl>
        </div>
      </div>
    </div>
  </div>

  <div class="bg-white overflow-hidden shadow rounded-lg">
    <div class="p-5">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 010 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 010-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375z" />
          </svg>
        </div>
        <div class="ml-5 w-0 flex-1">
          <dl>
            <dt class="text-sm font-medium text-gray-500 truncate">Reservas Confirmadas</dt>
            <dd class="text-lg font-medium text-gray-900"><%= @stats[:confirmed_reservations] %></dd>
          </dl>
        </div>
      </div>
    </div>
  </div>

  <div class="bg-white overflow-hidden shadow rounded-lg">
    <div class="p-5">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div class="ml-5 w-0 flex-1">
          <dl>
            <dt class="text-sm font-medium text-gray-500 truncate">Reservas Pendientes</dt>
            <dd class="text-lg font-medium text-gray-900"><%= @stats[:pending_reservations] %></dd>
          </dl>
        </div>
      </div>
    </div>
  </div>

  <div class="bg-white overflow-hidden shadow rounded-lg">
    <div class="p-5">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z" />
          </svg>
        </div>
        <div class="ml-5 w-0 flex-1">
          <dl>
            <dt class="text-sm font-medium text-gray-500 truncate">Salidas Hoy</dt>
            <dd class="text-lg font-medium text-gray-900"><%= @stats[:today_departures] %></dd>
          </dl>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
  <!-- Recent Reservations -->
  <div class="bg-white shadow rounded-lg">
    <div class="px-4 py-5 sm:px-6 border-b border-gray-200">
      <h3 class="text-lg leading-6 font-medium text-gray-900">Reservas Recientes</h3>
    </div>
    <ul role="list" class="divide-y divide-gray-200">
      <% @recent_reservations.each do |reservation| %>
        <li class="px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-indigo-600"><%= reservation.locator_code %></p>
              <p class="text-sm text-gray-500">
                <%= reservation.trip.route.origin_terminal.city %> →
                <%= reservation.trip.route.destination_terminal.city %>
              </p>
            </div>
            <div class="text-right">
              <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium <%= reservation.status == 'confirmed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800' %>">
                <%= reservation.status_label %>
              </span>
              <p class="text-sm text-gray-500"><%= reservation.formatted_total %></p>
            </div>
          </div>
        </li>
      <% end %>
    </ul>
    <div class="px-4 py-4 border-t border-gray-200">
      <%= link_to "Ver todas las reservas", admin_reservations_path, class: "text-sm font-medium text-indigo-600 hover:text-indigo-500" %>
    </div>
  </div>

  <!-- Upcoming Trips -->
  <div class="bg-white shadow rounded-lg">
    <div class="px-4 py-5 sm:px-6 border-b border-gray-200">
      <h3 class="text-lg leading-6 font-medium text-gray-900">Próximos Viajes</h3>
    </div>
    <ul role="list" class="divide-y divide-gray-200">
      <% @upcoming_trips.each do |trip| %>
        <li class="px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-gray-900">
                <%= trip.route.origin_terminal.city %> →
                <%= trip.route.destination_terminal.city %>
              </p>
              <p class="text-sm text-gray-500"><%= trip.bus.bus_type_label %></p>
            </div>
            <div class="text-right">
              <p class="text-sm font-medium text-gray-900"><%= trip.departure_at.strftime("%d/%m %H:%M") %></p>
              <p class="text-sm text-gray-500"><%= trip.available_seats_count %> asientos</p>
            </div>
          </div>
        </li>
      <% end %>
    </ul>
    <div class="px-4 py-4 border-t border-gray-200">
      <%= link_to "Ver todos los viajes", admin_trips_path(upcoming: true), class: "text-sm font-medium text-indigo-600 hover:text-indigo-500" %>
    </div>
  </div>
</div>
